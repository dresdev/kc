window.onload=()=>{(async()=>{if("undefined"==typeof supabase){const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.5/dist/umd/supabase.min.js",n.onload=e,document.head.appendChild(n)}else e();async function e(){try{const e=supabase.createClient("https://xzbmcdvyiydtdgoktxfd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6Ym1jZHZ5aXlkdGRnb2t0eGZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3MjQzNTIsImV4cCI6MjA2OTMwMDM1Mn0._94Ka9XFd43CbAOeJlfDdLdDru8Ju1MIwU8u4oyOXJA");if(!e)return void console.warn("Supabase client no se pudo crear.");const n=document?.title?.trim()||null;if(!n)return void console.warn("TÃ­tulo no disponible.");const o=await async function(){try{const e=await fetch("https://api64.ipify.org?format=json"),{ip:n}=await e.json();return n||null}catch(e){return console.warn("Error al obtener IP:",e),null}}();if(!o)return void console.warn("No se pudo obtener la IP.");const{error:r}=await e.rpc("register_entry_view",{p_title:n,p_ip:o});r&&console.error("Error al registrar visita:",r.message)}catch(e){console.error("Fallo inesperado:",e)}}})()};